

!function(){var I=YAHOO,_=I.util.Dom,x=KISSY.DOM,A=(KISSY.all,I.util.Event),O=I.lang,v=I.util.Connect,D=function(e,t){var n=this.value;if(/^\d+\.?\d*$/.test(n)||(n=Math.abs(parseFloat(n)),this.value=isNaN(n)?"":n),/([\.]\d{3,})$/.test(n)){var a=n.split(".");n=a[0]+"."+a[1].substring(0,2),this.value=n}1e8<=Math.ceil(parseFloat(n))&&(this.value=n.substring(0,8))},H=function(e){var t=e.value;/^\d+$/i.test(t)||(t=Math.abs(parseInt(t)),e.value=isNaN(t)?"":t)},m=function(e){return""!=(e=e.trim())||(alert("\u5b9d\u8d1d\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a!"),!1)},i=function(e){for(var t=[0,0],n=e.length,a=0;a<n;a++)if(0<=e.charCodeAt(a)&&e.charCodeAt(a)<=255?t[0]+=1:t[0]+=2,60<t[0]){t[1]=a;break}return t},u=function(t,n){var a=0,o=[0,0];return n&&(o=i(n),a=30-Math.ceil(o[0]/2)),t&&A.on(t,"keyup",function(){var e=_.getElementsByClassName("word-num","em","J_DataTable")[0];if(n=t.value,o=i(n),a=30-Math.ceil(o[0]/2),60<o[0])return t.value=n.substring(0,o[1]).trim(),void(e.innerHTML=0);e.innerHTML=a}),a},g=function(e){if(e.type)t=!0;else var t=!_.getElementsByClassName("edit-area","",e).length;if(b.hide(),_.getElementsByClassName("edit-area","",document).length&&t){var n=_.getElementsByClassName("edit-area","",document)[0],a=_.getElementsByClassName("current","tr","J_DataTable")[0];if(_.hasClass(n,"new-item-title")){var o=_.getElementsByClassName("item-title-area","div",a)[0],i=_.getElementsByClassName("edit-save","",o)[0],r=_.getElementsByClassName("surplus-words","span",a)[0],l=_.getElementsByClassName("item-title","a",a)[0],s=_.getAncestorByTagName(l,"p"),c=_.getElementsByClassName("edit-item-title","a",a)[0],m=l.getAttribute("title");A.on(o,"mouseover",function(){_.addClass(o,"high-light")}),A.on(o,"mouseout",function(){_.removeClass(o,"high-light")}),o.removeChild(r),o.removeChild(n),i.parentNode.removeChild(i),6==YAHOO.env.ua.ie&&_.setStyle(o,"marginBottom",""),m=(m=m.replace(/(&lt;)/g,"<")).replace(/(&gt;)/g,">"),KISSY.DOM.text(l,m),s.style.display="",c.style.display="",J(a),A.removeListener(document,"click",arguments.callee)}if(_.hasClass(n,"new-item-num")){var u=_.getAncestorByTagName(n,"td"),d=(i=_.getElementsByClassName("edit-save","","J_DataTable")[0],_.getElementsByClassName("item-num-area","p",a)[0]),p=d.getElementsByTagName("span")[0],g=p.getAttribute("data-num"),v=_.getElementsByClassName("item-num-addPrompt","p")[0];u.removeChild(n),u.removeChild(i),E(u),v&&u.removeChild(v),p.innerHTML=g,d.style.display="",J(a),A.removeListener(document,"click",arguments.callee)}if(_.hasClass(n,"new-item-price")){var f=_.getAncestorByTagName(n,"td"),h=(i=_.getElementsByClassName("edit-save","",f)[0],_.getElementsByClassName("item-price-area","p",a)[0]),y=_.getElementsByClassName("price-now","span",a)[0],C=_.getElementsByClassName("price-old","span",a),T="";if(f.removeChild(n),f.removeChild(i),k(n),h.style.display="",C.length){var N=_.getAncestorByTagName(C[0],"p");T=C[0].getAttribute("data-price"),C[0].innerHTML=T,N.style.display=""}else T=y.getAttribute("data-price"),y.innerHTML=T;J(a),A.removeListener(document,"click",arguments.callee)}_.hasClass(n,"popup-panel")&&"none"!=n.style.display&&(F(),a=_.getElementsByClassName("current","tr",document)[0],J(a),A.removeListener(document,"click",arguments.callee))}};function d(e){if(_.getElementsByClassName("edit-area","textarea")){var n=_.getElementsByClassName("edit-area","textarea")[0],a=_.getAncestorByTagName(n,"div"),o=_.getAncestorByTagName(n,"tr"),i=_.getElementsByClassName("surplus-words","span",o)[0],r=_.getElementsByClassName("edit-save","a",o)[0],l=a.getElementsByTagName("p")[0],s=_.getElementsByClassName("item-title","a",o)[0],c=_.getElementsByClassName("edit-item-title","a",o)[0];A.removeListener(r,"click"),A.stopPropagation(e),A.preventDefault(e),A.removeListener(document,"click",g);var t=n.value.trim();if(!m(t))return A.on(r,"click",function(e){M.call(this,e,d)}),A.on(document,"click",g),n.focus(),!1;t=(t="oldtext="+encodeURIComponent(n.defaultValue)+"&"+"newItemTitleStr="+encodeURIComponent(t)+"&"+s.href.split("?")[1])+"&_tb_token_="+document.getElementsByName("_tb_token_")[0].value,"undefined"!=typeof isTmallUser&&(t+="&type="+(isTmallUser?"b":"c"));v.asyncRequest("POST",EDIT_TILTE_URL+"?_input_charset=utf-8"+EDIT_TITLE_ACTION_TARGET,{success:function(e){if(A.on(r,"click",function(e){M.call(this,e,d)}),-1===e.status)alert("\u94fe\u63a5\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5"),A.on(document,"click",g);else if(void 0!==e.responseText){try{var t=O.JSON.parse(e.responseText)}catch(e){A.on(document,"click",g),alert("\u6570\u636e\u683c\u5f0f\u9519\u8bef")}t.data?(A.on(document,"click",g),alert(t.data)):""==t.data?(A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")):(a.removeChild(i),a.removeChild(n),a.removeChild(r),t.prompt&&y(t.prompt),t.title=t.title.replace(/(&lt;)/g,"<"),t.title=t.title.replace(/(&gt;)/g,">"),KISSY.DOM.text(s,t.title),s.setAttribute("title",t.title),l.style.display="",c.style.display="",A.removeListener(document,"click",g),J(o),A.on(a,"mouseover",function(){_.addClass(a,"high-light")}),A.on(a,"mouseout",function(){_.removeClass(a,"high-light")}),6==YAHOO.env.ua.ie&&_.setStyle(a,"marginBottom",""))}},failure:function(){A.on(r,"click",function(e){M.call(this,e,d)}),A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},timeout:1e4,cache:!1},t)}}var l,s,c,p,f,h,e=(s=!1,h=f=p=c=function(){},{init:function(){var e,t,n,a=document,o=a.all,i="undefined",r="IEDataStore";s||(typeof localStorage!==i?l=localStorage:typeof globalStorage!==i?l=globalStorage[location.hostname]:o&&((l=a.createElement("input")).type="hidden",a.body.appendChild(l),l.addBehavior("#default#userData")),e=c,"setItem"in l?e=function(e,t){l.setItem(e,t)}:o&&(e=function(e,t){try{l.setAttribute(e,t),l.save(r)}catch(e){}}),p=e,t=c,"getItem"in l?t=function(e){return l.getItem(e)}:o&&(t=function(e){try{return l.load(r),l.getAttribute(e)}catch(e){}}),f=t,n=c,"removeItem"in l?n=function(e){l.removeItem(e)}:o&&(n=function(e){try{l.removeAttribute(e),l.save(r)}catch(e){}}),h=n,s=!0)},setItem:function(e,t){return p(e,t)},getItem:function(e){return f(e)},removeItem:function(e){return h(e)}});function E(e){var t=x.get(".perators",e);t&&x.remove(t),_.removeClass(e,"edit")}function y(e){if(void 0!==top.RECOMMEND_COUNT){var t=e.overflow,n=e.cancel;if(!t){RECOMMEND_COUNT=void 0;var a=top.document.getElementById("J_RecommendPrompt");a&&a.parentNode&&a.parentNode.removeChild(a)}if(n){var o=top.YAHOO.util.Dom.getElementsByClassName("current","tr")[0],i=top.YAHOO.util.Dom.get("J_curRecommendNum_1"),r=top.YAHOO.util.Dom.get("J_PromptCurNumber"),l=_.getElementsByClassName("recommend-word","p",o)[0];_.removeClass(o,"recommend"),i.innerHTML=C(i)-1,r&&(r.innerHTML=C(r)-1),l&&l.parentNode&&l.parentNode.removeChild(l)}}}function C(e){var t=e.innerHTML;return t=t.replace(/\D/g,"")}window.simpleStorage=e;var b=function(){var l,s=top.UID||"",c=top.document.createElement("div");function m(){c.parentNode&&(c.parentNode.removeChild(c),A.removeListener(c,"click"))}return c.innerHTML='<p>\u5f53\u6a71\u7a97\u603b\u6570 < \u5df2\u63a8\u8350\u6570\u65f6\uff0c\u7f16\u8f91\u540e\u63a8\u8350\u72b6\u6001\u5c06\u88ab\u53d6\u6d88</p><div class = "pro_operations" ><input id="pro_choice" type="checkbox" value="checkbox"><label for="pro_choice">\u4e0d\u518d\u63d0\u793a</label><input type="button" value="\u786e\u5b9a" id="pro_btn"><a href="#" id="pro_cancel">\u53d6\u6d88</a></div>',_.addClass(c,"prompts"),{show:function(e,t,a){var n,o,i,r=A.getTarget(e);A.on(c,"click",function(e){var t=A.getTarget(e);if(A.stopPropagation(e),"pro_btn"==t.id){var n=top.YAHOO.util.Dom.get("pro_choice").checked;m(),simpleStorage.setItem("hidePrompt"+s,n),a&&a.call(null,e)}else"pro_cancel"==t.id&&(A.preventDefault(e),m(),g.call(null,e))}),(l=_.getAncestorByTagName(r,"td"))?(l.appendChild(c),o=(n=_.getXY(r))[0]-c.clientWidth/2+20,i=n[1]-c.clientHeight-8):"FORM"==r.tagName&&((l=top.document.getElementById("J_edit-SKU")).appendChild(c),o=(n=top.YAHOO.util.Dom.getXY(l))[0]+(l.clientWidth-c.clientWidth)/2,i=n[1]+l.clientHeight-c.clientHeight-65),_.setXY(c,[o,i]),simpleStorage.setItem("rePromptNumber"+s,t||0)},hide:m}}();function M(e,t){var n,a=A.getTarget(e);A.stopPropagation(e),A.preventDefault(e),n="FORM"===a.tagName?top.YAHOO.util.Dom.getElementsByClassName("current","tr")[0]:_.getAncestorByTagName(a,"tr"),_.hasClass(n,"recommend")?o(e,t,this):t.call(this,e)}var o=function(e,t,n){var a=n||this,o=top.UID||"",i=top.RECOMMEND_COUNT;if(void 0!==i){var r=simpleStorage.getItem("rePromptNumber"+o),l=simpleStorage.getItem("hidePrompt"+o);r==i?"false"==l?b.show(e,i,t):t.call(a,e):(b.show(e,i,t),simpleStorage.setItem("hidePrompt"+o,"false"))}else t.call(a,e)},L=function(e){var t=A.getTarget(e);if(A.stopPropagation(e),A.preventDefault(e),!_.hasClass(t,"item-title-area")&&!_.hasClass(t,"edit-save")){var n=this;A.removeListener(n,"mouseover"),A.removeListener(n,"mouseout"),_.hasClass(n,"high-light")&&_.removeClass(n,"high-light"),g(n);var a=_.getAncestorByTagName(n,"tr");S(a);var o=n.getElementsByTagName("p")[0],i=_.getElementsByClassName("item-title","a",a)[0],r=_.getElementsByClassName("edit-item-title","a",a)[0];o.style.display="none",r.style.display="none";var l=document.createElement("textarea");l.setAttribute("rows",2),l.defaultValue="innerText"in i?i.innerText:i.textContent,l.value="innerText"in i?i.innerText:i.textContent,_.addClass(l,"new-item-title edit-area");var s=document.createElement("span"),c=u(null,l.value);s.innerHTML='\u8fd8\u80fd\u8f93<em class="word-num">'+c+"</em>\u5b57",_.addClass(s,"surplus-words");var m=document.createElement("a");m.innerHTML="\u4fdd\u5b58",m.setAttribute("href","#"),_.addClass(m,"edit-save"),n.appendChild(s),n.appendChild(l),l.focus(),n.appendChild(m),6==YAHOO.env.ua.ie&&_.setStyle(n,"marginBottom","-18px"),function(){if(_.getElementsByClassName("edit-area","textarea")){var t=_.getElementsByClassName("edit-area","textarea")[0],e=_.getAncestorByTagName(t,"tr"),n=_.getElementsByClassName("edit-save","a",e)[0],a=_.getElementsByClassName("surplus-words","span",e)[0];A.on(document,"click",g),A.on(t,"click",function(e){A.stopPropagation(e),t.focus()}),A.on(a,"click",function(e){A.stopPropagation(e)}),u(t,null),A.on(n,"click",function(e){M.call(this,e,d)})}}()}},P=function(e){A.preventDefault(e),window.clipboardData.setData("text",this.href),T(this)},t=document.getElementsByTagName("script"),r=t[t.length-1].src;function U(n){var a,e=KISSY,o=e.DOM,i=e.Node('<div id="flashClipboardContainer" class="flashclipboard"></div>'),t=r.substring(0,r.lastIndexOf("/")+1)+"clipboard.swf";i.appendTo(document.body),a=new AJBridge.Clipboard("#flashClipboardContainer",{src:t,attrs:{width:i.width(),height:i.height()},params:{bgcolor:"#FCC",wmode:"transparent",scale:"showall"},hand:!0,btn:!0}),e.each(n,function(n){A.on(n,"mouseover",function(e){e.preventDefault();var t=o.offset(n);i.offset(t),a.host=n}),A.on(n,"click",function(e){e.preventDefault()})}),a.on("error failed",function(e){var t="\u590d\u5236\u529f\u80fd\u4f9d\u8d56Flash\u652f\u6301\uff0c\u8bf7\u53bbAdobe\u5b98\u7f51\u66f4\u65b0\u6700\u65b0\u7248\u672c";o.attr(n,"title",t),i.attr("title",t),o.addClass(n,"copy-link-error"),i.addClass("copy-link-error")}),a.on("mouseDown",function(e){var t=a.host,n=o.attr(t,"href");a.setData(n),a.getData()!==n?window.prompt("\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u81ea\u52a8\u590d\u5236",n):i.attr("data-content",a.getData())}),a.on("mouseUp",function(e){i.attr("data-content")&&T(a.host)}),a.init(),U=function(){}}function T(e){var t=_.getXY(e),n=_.getAncestorByTagName(e,"td"),a=_.getFirstChild(n);if(!_.getElementsByClassName("copy-link-succeed","span",n).length){var o=document.createElement("span");_.addClass(o,"copy-link-succeed"),o.innerHTML="\u5df2\u590d\u5236\u94fe\u63a5",_.insertBefore(o,a),_.setXY(o,[t[0],t[1]-30]),setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},2e3)}}function N(e){if(_.getElementsByClassName("edit-area","textarea")){var o=_.getElementsByClassName("edit-area","input")[0],i=_.getAncestorByTagName(o,"tr"),r=_.getElementsByClassName("item-num-area","p",i)[0],l=_.getAncestorByTagName(r,"td"),s=_.getElementsByClassName("edit-save","a",i)[0],c=r.getElementsByTagName("span")[0],t=c.id.split(":")[1],m=_.getElementsByClassName("item-num-addPrompt","p",l)[0];A.removeListener(s,"click"),A.stopPropagation(e),A.preventDefault(e),A.removeListener(document,"click",g);var n=o.value,a="";if(_.hasClass(o.parentNode,"item-num-add")){if(0==n||""==n)return g(o),!1;a="&type=add"}else if(0==n&&!confirm("\u82e5\u4fee\u6539\u5e93\u5b58\u4e3a0\uff0c\u5219\u5b9d\u8d1d\u5c06\u4e0b\u67b6\u3002\u662f\u5426\u7ee7\u7eed\uff1f"))return A.on(s,"click",N),A.on(document,"click",g),o.focus(),!1;n="oldtext="+encodeURIComponent(o.defaultValue)+"&"+"newItemNum="+n.replace(/^0+(?=.)/g,"")+"&itemId=",n+=t,n=(n+=a)+"&_tb_token_="+document.getElementsByName("_tb_token_")[0].value;v.asyncRequest("POST",EDIT_NUM_URL+"?_input_charset=utf-8"+EDIT_NUM_ACTION_TARGET,{success:function(e){if(A.on(s,"click",N),-1===e.status)A.on(document,"click",g),alert("\u94fe\u63a5\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5");else if(void 0!==e.responseText){try{var t=O.JSON.parse(e.responseText)}catch(e){A.on(document,"click",g),alert("\u6570\u636e\u683c\u5f0f\u9519\u8bef")}if(t.data)A.on(document,"click",g),alert(t.data);else if(""==t.data)A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");else if("0"==t.num)A.removeListener(document,"click",g),w(i);else{if(l.removeChild(o),l.removeChild(s),E(l),m&&l.removeChild(m),c.innerHTML=t.num,c.setAttribute("data-num",t.num),void 0!==t.less){var n=c.id.replace("itemNumId","itemLessNum"),a=_.get(n);a&&(a.innerHTML=t.less)}r.style.display="",A.removeListener(document,"click",g),J(i)}}},failure:function(){A.on(s,"click",N),A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},timeout:1e4,cache:!1},n)}}var X=function(e){A.stopPropagation(e),A.preventDefault(e);var t=this,n=_.getAncestorByTagName(t,"tr"),a=_.getAncestorByTagName(t,"td"),o=_.getNextSibling(t);if(o&&-1!=o.className.indexOf("preless")&&(o=_.getNextSibling(o)),null!=o)return!1;g(a),S(n);var i=t.getElementsByTagName("span")[0];_.hasClass(t.parentNode,"item-num-add")||(t.style.display="none");var r=document.createElement("input");_.hasClass(t.parentNode,"item-num-add")||(r.defaultValue=i.innerHTML,r.value=i.innerHTML),r.setAttribute("maxlength",9),_.addClass(r,"new-item-num edit-area");var l=document.createElement("a");if(l.innerHTML="\u4fdd\u5b58",l.setAttribute("href","#"),_.addClass(l,"edit-save"),_.insertAfter(l,t),_.insertAfter(r,t),r.focus(),_.hasClass(a,"item-num-add")){var s=document.createElement("p"),c=document.createElement("span");s.innerHTML="\u4ec5\u4e3a\u589e\u52a0\u5e93\u5b58",s.className="item-num-addPrompt",a.appendChild(s),c.innerHTML="+",c.className="perators",t.appendChild(c),_.addClass(a,"edit")}!function(){if(_.getElementsByClassName("edit-area","textarea")){var e=_.getElementsByClassName("edit-area","input")[0],t=_.getElementsByClassName("edit-save","a")[0];A.on(document,"click",g),A.on(e,"keyup",function(e){var t=A.getTarget(e);H(t);var n=t.value;1e8<parseInt(n)&&(t.value=1e8)}),A.on(e,"keypress",function(e){var t=A.getTarget(e);H(t);var n=t.value;1e8<parseInt(n)&&(t.value=1e8),13==e.keyCode&&N(e)}),A.on(e,"click",function(e){A.stopPropagation(e)}),A.on(t,"click",N)}}()};function B(e){if(_.getElementsByClassName("edit-area","textarea")){var n=_.getElementsByClassName("edit-area","input")[0],a=_.getAncestorByTagName(n,"tr"),o=_.getAncestorByTagName(n,"td"),i=_.getElementsByClassName("item-price-area","p",o)[0],r=_.getElementsByClassName("price-now","span",o)[0],l=_.getElementsByClassName("price-old","span",o),t="",s="",c=_.getElementsByClassName("edit-save","a",o)[0];if(l.length){var m=_.getAncestorByTagName(l[0],"p");s="&"+r.getAttribute("data-islimit"),t=l[0].id.split(":")[1]}else t=r.id.split(":")[1];A.removeListener(c,"click"),A.stopPropagation(e),A.preventDefault(e),A.removeListener(document,"click",g);var u=n.value.trim(),d=KISSY.DOM.attr(n,"data-allowZero");if(!d&&""==u)return alert("\u5b9d\u8d1d\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"),A.on(c,"click",function(e){M.call(this,e,B)}),A.on(document,"click",g),n.focus(),!1;if(!d&&0==parseFloat(u))return alert("\u5b9d\u8d1d\u4ef7\u683c\u4e0d\u80fd\u4e3a0"),A.on(c,"click",function(e){M.call(this,e,B)}),A.on(document,"click",g),n.focus(),!1;u+=s;var p=document.getElementById("skuPriceList:"+t);u="oldtext="+encodeURIComponent(n.defaultValue)+"&"+"newItemPrice="+u+"&itemId=",u=(u+=t)+"&_tb_token_="+document.getElementsByName("_tb_token_")[0].value,p&&(u=u+"&skuPriceList="+p.value),"undefined"!=typeof isTmallUser&&(u+="&type="+(isTmallUser?"b":"c"));v.asyncRequest("POST",EDIT_PRICE_URL+"?_input_charset=utf-8"+EDIT_PRICE_ACTION_TARGET,{success:function(e){if(A.on(c,"click",function(e){M.call(this,e,B)}),-1===e.status)A.on(document,"click",g),alert("\u94fe\u63a5\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5");else if(void 0!==e.responseText){try{var t=O.JSON.parse(e.responseText)}catch(e){A.on(document,"click",g),alert("\u6570\u636e\u683c\u5f0f\u9519\u8bef")}t.data?(A.on(document,"click",g),alert(t.data.error)):""==t.data?(A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")):(o.removeChild(n),o.removeChild(c),t.prompt&&y(t.prompt),l.length?(r.innerHTML=t.price.currentPrice,l[0].innerHTML=t.price.oldPrice,l[0].setAttribute("data-price",t.price.currentPrice)):(r.innerHTML=t.currentPrice,r.setAttribute("data-price",t.currentPrice)),i.style.display="",l.length&&(m.style.display=""),A.removeListener(document,"click",g),J(a))}},failure:function(){A.on(c,"click",function(e){M.call(this,e,B)}),A.on(document,"click",g),alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},timeout:1e4,cache:!1},u)}}function k(e){}function K(a,o){KISSY.use("v2/com/rangeinput",function(e,t){var n=new t;k=function(e){n.destroy(e)},(K=function(e,t){n.bind(e,t)})(a,o)})}var Y=function(e){A.stopPropagation(e),A.preventDefault(e);var t=_.getAncestorByTagName(this,"tr"),n=_.getAncestorByTagName(this,"td");g(n),S(t);var a=_.getElementsByClassName("price-now","span",n)[0],o=_.getElementsByClassName("price-old","span",n);(this.style.display="none",o.length)&&(_.getAncestorByTagName(o[0],"p").style.display="none");var i=document.createElement("input"),r=KISSY.DOM.attr(n,"data-allowZero");KISSY.DOM.attr(i,"data-allowZero",r),o.length?(i.defaultValue=o[0].innerHTML,i.value=o[0].innerHTML):(i.defaultValue=a.innerHTML,i.value=a.innerHTML);var l=KISSY.DOM.attr(a,"data-range");l&&KISSY.DOM.attr(i,"data-range",l),_.addClass(i,"new-item-price edit-area");var s=document.createElement("a");s.innerHTML="\u4fdd\u5b58",s.setAttribute("href","#"),_.addClass(s,"edit-save"),n.appendChild(i),i.focus(),n.appendChild(s),function(){if(_.getElementsByClassName("edit-area","textarea")){var e=_.getElementsByClassName("edit-area","input")[0],t=_.getElementsByClassName("edit-save","a")[0];A.on(document,"click",g),A.on(e,"keyup",function(e){var t=A.getTarget(e);D.call(t)}),A.on(e,"keypress",function(e){var t=A.getTarget(e);D.call(t),13==e.keyCode&&M.call(this,e,B)}),A.on(e,"click",function(e){A.stopPropagation(e)}),A.on(t,"click",function(e){M.call(this,e,B)}),K(e,{validEvent:"",initTip:!0})}}()},S=function(e){var t=_.getPreviousSibling(e).getElementsByTagName("td")[0];_.addClass(e,"current"),_.addClass(t,"current-td")},J=function(e){_.hasClass(e,"current")||(e=_.getElementsByClassName("current","tr",document)[0]);var t=_.getPreviousSibling(e).getElementsByTagName("td")[0];_.removeClass(t,"current-td"),_.removeClass(e,"current")},R=function(e){A.preventDefault(e),A.stopPropagation(e);var t=_.getAncestorByTagName(this,"tr"),n=_.getAncestorByTagName(this,"td");g(n),S(t);var a=_.hasClass(n,"item-num-add")?"&type=add":"",o=this.getAttribute("data-url")+a+"&t="+(+new Date).toString();if(_.get("J_edit-SKU")){(i=_.get("J_edit-SKU")).style.visibility="hidden",i.style.display="block",(r=i.getElementsByTagName("iframe")[0]).style.width="";l=i.getElementsByTagName("a")[0]}else{var i,r,l;(i=document.createElement("div")).id="J_edit-SKU",_.addClass(i,"popup-panel shadow edit-area"),i.style.position="absolute",i.style.zIndex="10000",i.style.visibility="hidden",i.style.backgroundColor="#f3f3f3",i.style.padding="1px",i.style.border="1px solid #969696",(r=document.createElement("iframe")).setAttribute("frameborder","0",0),r.setAttribute("scrolling","no"),r.style.width="100%",i.appendChild(r),(l=document.createElement("a")).href="#",l.innerHTML="\u5173\u95ed",_.addClass(l,"close-btn"),i.appendChild(l),document.body.appendChild(i),A.on(l,"click",function(e){A.preventDefault(e),F(),J(t)})}r.setAttribute("src",o)},F=function(e){var t=(e=e||document).getElementById("J_edit-SKU");t.getElementsByTagName("iframe")[0].style.width="",t.style.width="",t.style.display="none"},j=function(e,t){if(clearTimeout(this.scrollTimer),_.setStyle(e,"display","block"),itemCate=_.getAncestorByTagName(e,"div"),itemCate.style.position="relative","none"!=e.style.display&&t){var n=_.getXY(itemCate);_.setStyle(e,"left",t[0]-n[0]-e.clientWidth+13+"px"),_.setStyle(e,"top",e.clientHeight+2+"px")}},z=function(e){this.scrollTimer=setTimeout(function(){_.setStyle(e,"display","none"),itemCate=_.getAncestorByTagName(e,"div"),itemCate.style.position=""},500)},q=function(){return(q=0<A.webkit?function(){return document.body}:function(){return document.documentElement})()},W=function(){var i=_.getElementsByClassName("go-top","div",document)[0],r=_.get("header").offsetWidth||950;return(W=6===A.ie?function(e){var t=_.getClientHeight(),n=t-Math.floor(.15*t)+q().scrollTop;if(!0!==e){var a=_.getClientWidth(),o=Math.floor((a-r)/2)+r+5;i.style.left=o+"px",i.style.top=n+"px"}else i.style.top=n+"px"}:function(){var e=_.getClientWidth(),t=Math.floor((e-r)/2)+r+5;i.style.left=t+"px"})()};window.operationsFix_reload=function(){_.get("J_DataTable")&&(window.operationsStartPos=_.getY("J_DataTable"))};var V=function(){!function(){var e=document.getElementsByTagName("label"),t=parent.document.getElementById("J_edit-SKU"),n=t.getElementsByTagName("iframe")[0],a=width=0,o=0;o=_.get("J_edit-SKU-more")?e.length-1:e.length;for(var i=0;i<o;i++)width=12*x.text(e[i]).length,width>a&&(a=width);470<=(a+=150)?(a="470",_.setStyle(e,"width","350px"),_.setStyle(e,"height","auto")):a<210?a="210":(_.setStyle(e,"width","auto"),_.setStyle(e,"height","18px"));var r=_.getElementsByClassName("sku-preless","span");r&&0<r.length&&(a+=55),document.body.style.width=a+"px",n.style.width=a+"px",t.style.width=a+"px";var l=document.body.clientHeight;l+=40,window.MessageEvent&&!document.getBoxObjectFor&&(l+=10),window.innerWidth&&window.scrollMaxX&&(l+=20),n.style.height=l+"px";t.style.height=420<l?(t.style["overflow-y"]="auto",t.style["overflow-x"]="hidden","420px"):(t.style.overflow="hidden","auto")}();document.getElementsByTagName("label");var e=parent.document.getElementById("J_edit-SKU");e.getElementsByTagName("iframe")[0],width=0;e.style.visibility="visible";var t=_.getElementsByClassName("current","tr",parent.document)[0];if(function(){var e=parent.document.getElementById("J_edit-SKU"),t=(e.getElementsByTagName("iframe")[0],_.getElementsByClassName("current","tr",parent.document)[0]);if(_.get("edit-num-SKU-iframe")){var n=_.getElementsByClassName("item-SKU-num-area","p",t)[0];n=_.getAncestorByTagName(n,"td");var a=_.getXY(n)}else n=_.getElementsByClassName("item-SKU-price-area","p",t)[0],n=_.getAncestorByTagName(n,"td"),a=_.getXY(n);_.setXY(e,[a[0]-e.clientWidth+n.clientWidth,a[1]])}(),_.get("edit-num-SKU-iframe")){var n=_.getElementsByClassName("item-SKU-num-area","p",t)[0];n=_.getAncestorByTagName(n,"td");var a=_.getXY(n)}else{n=_.getElementsByClassName("item-SKU-price-area","p",t)[0];n=_.getAncestorByTagName(n,"td");a=_.getXY(n)}var o=parent.D.getClientHeight();parent.document.body.clientHeight;if(YAHOO.env.ua.webkit?scrollHeight=parent.document.body.scrollTop:scrollHeight=parent.document.documentElement.scrollTop,a[1]+e.clientHeight>scrollHeight+o)if(r=(r=scrollHeight+e.clientHeight)<a[1]-150?r:a[1]-150,YAHOO.env.ua.webkit)var i=setInterval(function(){if(parent.document.body.scrollTop<=r+5&&parent.document.body.scrollTop>=r-5)clearInterval(i);else{var e=parseInt((parent.document.body.scrollTop-r)/2);parent.document.body.scrollTop=parent.document.body.scrollTop-e}},200);else i=setInterval(function(){if(parent.document.documentElement.scrollTop<=r+5&&parent.document.documentElement.scrollTop>=r-5)clearInterval(i);else{var e=parseInt((parent.document.documentElement.scrollTop-r)/3);parent.document.documentElement.scrollTop=parent.document.documentElement.scrollTop-e}},200);if(a[1]<scrollHeight+70){var r=scrollHeight-70;if(YAHOO.env.ua.webkit)i=setInterval(function(){if(parent.document.body.scrollTop<=r+5&&parent.document.body.scrollTop>=r-5)clearInterval(i);else{var e=parseInt((parent.document.body.scrollTop-r)/2);parent.document.body.scrollTop=parent.document.body.scrollTop-e}},200);else i=setInterval(function(){if(parent.document.documentElement.scrollTop<=r+5&&parent.document.documentElement.scrollTop>=r-5)clearInterval(i);else{var e=parseInt((parent.document.documentElement.scrollTop-r)/3);parent.document.documentElement.scrollTop=parent.document.documentElement.scrollTop-e}},200)}},w=function(e){var t=e,n=_.getPreviousSibling(e),a=new YAHOO.util.Anim(t,{opacity:{to:0}},I.env.ua.ie?.1:.5,YAHOO.util.Easing.easeOut);a.onComplete.subscribe(function(){t.parentNode.removeChild(t)}),a.animate();var o=new YAHOO.util.Anim(n,{opacity:{to:0}},I.env.ua.ie?.1:.5,YAHOO.util.Easing.easeOut);o.onComplete.subscribe(function(){n.parentNode.removeChild(n)}),o.animate()},G=function(){var e=this.value,t=0;this.value=this.value.replace(/^0+/g,"");var n,a=document.forms["edit-SKU-form"],o=_.getElementsByClassName("SKU-total-num","strong",a)[0],i="add"===$(location.href,"type"),r=parseInt(o.innerHTML,0),l=_.getElementsByClassName("more-SKU-num","span",a)[0];l&&(t=parseInt(l.innerHTML,0)),i&&(t+=(n=0,KISSY.all(".SKU-total").each(function(e){n+=parseInt(e.text(),10)||0}),n||0));for(var s,c=_.getElementsBy(function(e){return"text"===e.type},"input",a),m=0;m<c.length;m++)s=c[m].value,parseInt(s,0)||(s=0),t+=parseInt(s,0);return 9e8<t?(this.value=e-(t-r),alert("\u51fa\u9519\u5566\uff01\u603b\u5e93\u5b58\u8d85\u8fc7900000000\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\uff01"),!1):(o.innerHTML=t,!0)};function Q(e){A.preventDefault(e);var t=document.forms["edit-SKU-form"],n=$(location.href,"type");if(0==_.getElementsByClassName("SKU-total-num","strong",t)[0].innerHTML&&!confirm("\u82e5\u4fee\u6539\u5e93\u5b58\u4e3a0\uff0c\u5219\u5b9d\u8d1d\u5c06\u4e0b\u67b6\u3002\u662f\u5426\u7ee7\u7eed\uff1f"))return!1;var a=document.getElementsByName("new-SKU-num"),o=document.getElementsByName("SKU-id");if(!o||o.length<=0||!a||a.length!=o.length){F(parent.document);var i=_.getElementsByClassName("current","tr",parent.document)[0];return J(i),!1}for(var r,l="",s="",c="",m=[],u=0,d=0;d<o.length;d++)s=(r=a[d]).value||"0",l+=(c=o[d].value)+":"+s+";",m.push(c+":"+(r.defaultValue||0)),u+=1*s;var p="oldtext="+m.join(";")+"&",g=t["item-num-id"].value;if(l=p+"skus="+l+"&itemId="+g,"add"==n&&(l+="&type=add",0==u)){F(parent.document);i=_.getElementsByClassName("current","tr",parent.document)[0];return J(i),!1}l=l+"&_tb_token_="+parent.document.getElementsByName("_tb_token_")[0].value;v.asyncRequest("POST",EDIT_SKU_NUM_URL+"?_input_charset=utf-8",{success:function(e){if(-1===e.status)alert("\u94fe\u63a5\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5");else if(void 0!==e.responseText){try{var t=O.JSON.parse(e.responseText)}catch(e){alert("\u6570\u636e\u683c\u5f0f\u9519\u8bef")}if(t.data)alert(t.data);else if(""==t.data)alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");else if("0"==t.totalNum){F(parent.document);var n=_.getElementsByClassName("current","tr",parent.document)[0];w(n)}else{parent.changeQuantityBySku(g,t),F(parent.document);n=_.getElementsByClassName("current","tr",parent.document)[0];J(n)}}},failure:function(){alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},timeout:1e4,cache:!1},l);return!1}function Z(e){if(A.preventDefault(e),!function(){var e=document.forms["edit-SKU-form"],t=_.getElementsByClassName("new-fix-price","input",e)[0].value.trim(),n=_.get("sku-Price-Error-Info"),a="",o="",i=_.get("max-sku-price").value,r=_.get("min-sku-price").value,l=!1,s=!1,c=!0,m=!0,u=_.getElementsBy(function(e){var t=_.getAncestorByTagName(e,"p");if(!_.hasClass(t,"total-num")&&!_.getElementsByClassName("num-zero","span",t).length)return"text"===e.type},"input",e);""==t&&(s=!0);0==parseFloat(t)&&(l=!0);for(var d=0;d<u.length;d++){var p=u[d],g="true"===KISSY.DOM.attr(p,"data-allowZero");o=p.value.trim(),t<=parseFloat(o)&&(c=!1),t>=parseFloat(o)&&(m=!1),g||""!=o||(s=!0),g||0!=parseFloat(o)||(l=!0)}t<=parseFloat(i)&&(c=!1);t>=parseFloat(r)&&(m=!1);if(s||l||m||c)return s&&(a+="\u5b9d\u8d1d\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"),l&&(a+="\n\u5b9d\u8d1d\u4ef7\u683c\u4e0d\u80fd\u4e3a0"),m&&(a+="\n"+(n&&n.value?n.value:"\u8bf7\u5c06\u60a8\u7684\u9500\u552e\u5c5e\u6027\u8868\u4e2d\u7684\u4ef7\u683c\u8bbe\u7f6e\u5728\u5408\u7406\u7684\u4ef7\u683c\u533a\u95f4\u5185\uff0c\u4e0d\u5305\u62ec\u5e93\u5b58\u4e3a0\u7684\u5b9d\u8d1d\u4ef7\u683c")),c&&(a+="\n"+(n&&n.value?n.value:"\u8bf7\u5c06\u60a8\u7684\u9500\u552e\u5c5e\u6027\u8868\u4e2d\u7684\u4ef7\u683c\u8bbe\u7f6e\u5728\u5408\u7406\u7684\u4ef7\u683c\u533a\u95f4\u5185\uff0c\u4e0d\u5305\u62ec\u5e93\u5b58\u4e3a0\u7684\u5b9d\u8d1d\u4ef7\u683c")),alert(a),!1;return!0}())return!1;for(var t,n=document.forms["edit-SKU-form"],a=_.getElementsBy(function(e){return"text"===e.type},"input",n),o="",i="",r="",l=[],s=0;s<a.length;s++)r=(t=a[s]).value.trim(),o+=(i=a[s].id.split(":")[1])+":"+r+";",l.push(i+":"+t.defaultValue);var c="oldtext="+l.join(";")+"&",m=n["item-num-id"].value;o=c+"skus="+o+"&itemId="+m;var u=parent.document.getElementsByName("_tb_token_")[0].value,d=parent.document.getElementById("skuPriceList:"+m),p=document.getElementById("islimit"),g=document.getElementById("discountRateStr");o=o+"&_tb_token_="+u,d&&(o=o+"&skuPriceList="+d.value),o+=p&&p.value?"&islimit="+p.value:"",o+=g&&g.value?"&discountRateStr="+g.value:"",void 0!==top.isTmallUser&&(o+="&type="+(top.isTmallUser?"b":"c"));v.asyncRequest("POST",EDIT_SKU_PRICE_URL+"?_input_charset=utf-8",{success:function(e){if(-1===e.status)alert("\u94fe\u63a5\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5");else if(void 0!==e.responseText){try{var t=O.JSON.parse(e.responseText)}catch(e){alert("\u6570\u636e\u683c\u5f0f\u9519\u8bef")}if(t.data){if(t.data.error){var n=t.data.error;alert(n["SKUId:0"])}}else if(""==t.data)alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");else{F(parent.document),t.prompt&&y(t.prompt);var a=_.getElementsByClassName("current","tr",parent.document)[0],o=_.getElementsByClassName("price-now","span",a)[0],i=_.getElementsByClassName("price-old","span",a)[0];i?(o.innerHTML=t.price.currentPrice,i.innerHTML=t.price.oldPrice):o.innerHTML=t.currentPrice,J(a)}}},failure:function(){alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")},timeout:1e4,cache:!1},o)}function $(e,t){for(var n=e.match(/[?,&][^&]*/gi),a={},o=0;o<n.length;o++){var i=n[o].substring(1);a[i.split("=")[0]]=i.split("=")[1]}return null==typeof t?a:a[t]?a[t]:""}A.onDOMReady(function(){if(_.get("J_goodsOnSale")||_.get("J_goodsInSock")){var e=document.forms.open,t=_.getElementsByClassName("search-price","input",e),n=_.getElementsByClassName("search-num","input",e);A.on(t,"keyup",function(e){var t=A.getTarget(e);D.call(t)}),A.on(t,"keypress",function(e){if(13==e.keyCode){var t=A.getTarget(e);D.call(t)}}),A.on(n,"keyup",function(e){var t=A.getTarget(e);H(t);var n=t.value;9<n.length&&(t.value=n.substring(0,9))}),A.on(n,"keypress",function(e){if(13==e.keyCode){var t=A.getTarget(e);H(t);var n=t.value;9<n.length&&(t.value=n.substring(0,9))}}),A.on(e,"submit",function(e){D.call(t[0]),D.call(t[1]),H(n[0]),9<n[0].value.length&&(n[0].value=n[0].value.substring(0,9)),H(n[1]),9<n[1].value.length&&(n[1].value=n[1].value.substring(0,9))});var a=_.get("J_operate-succeed");if(a){_.getAncestorByTagName(a,"div");setTimeout(function(){var e=new YAHOO.util.Anim(a,{opacity:{to:0}},I.env.ua.ie?.1:.5,YAHOO.util.Easing.easeOut);e.onComplete.subscribe(function(){a.parentNode.removeChild(a)}),e.animate()},1500)}var o=_.getElementsByClassName("item-title-area","div","J_DataTable");_.getElementsByClassName("item-cate","div","J_DataTable");A.on(o,"mouseover",function(){_.addClass(this,"high-light")}),A.on(o,"mouseout",function(){_.removeClass(this,"high-light")}),A.on(o,"click",L);for(var i=0;i<o.length;i++){var r=o[i].getElementsByTagName("a");A.on(r[0],"click",function(e){A.stopPropagation(e)}),A.on(r[1],"click",function(e){A.preventDefault(e)})}var l=_.getElementsByClassName("item-num-area","p","J_DataTable");A.on(l,"click",X),A.on(l,"mouseover",function(){_.addClass(this,"high-light")}),A.on(l,"mouseout",function(){_.removeClass(this,"high-light")});var s=_.getElementsByClassName("item-SKU-num-area","p","J_DataTable");A.on(s,"click",R),A.on(s,"mouseover",function(){_.addClass(this,"high-light")}),A.on(s,"mouseout",function(){_.removeClass(this,"high-light")});var c=_.getElementsByClassName("item-price-area","p","J_DataTable");A.on(c,"click",Y),A.on(c,"mouseover",function(){_.addClass(this,"high-light")}),A.on(c,"mouseout",function(){_.removeClass(this,"high-light")});for(i=0;i<c.length;i++){var m=c[i].getElementsByTagName("a")[0];A.on(m,"click",function(e){A.stopPropagation(e)})}var u=_.getElementsByClassName("item-SKU-price-area","p","J_DataTable");A.on(u,"click",R),A.on(u,"mouseover",function(){_.addClass(this,"high-light")}),A.on(u,"mouseout",function(){_.removeClass(this,"high-light")});for(i=0;i<u.length;i++){m=u[i].getElementsByTagName("a")[0];A.on(m,"click",function(e){A.stopPropagation(e)})}var d=_.getElementsByClassName("icon-trigger","span","J_DataTable");A.on(d,"mouseover",function(e){var n=this,t=_.getXY(n),a=(_.getAncestorByTagName(n,"div"),_.getPreviousSibling(n));j.call(this,a,t),A.removeListener(this,"mouseover",arguments.callee),A.on(this,"mouseover",function(e){j.call(this,a)}),A.on(this,"mouseout",function(){z.call(this,a)}),A.on(a,"mouseover",function(e){j.call(n,this)}),A.on(a,"mouseout",function(e){var t=A.getRelatedTarget(e);this==t||_.isAncestor(this,t)||z.call(n,this)})}),function(){if(_.getElementsByClassName("list-head","div","").length){window.operationsFix_reload();var n=_.getElementsByClassName("list-head","div","")[0],e=_.getElementsByClassName("goods-sid","tr","J_DataTable"),t=e[e.length-1],a=_.getY(t)-90,o=x.width(n),i=_.getElementsByClassName("trigger-container","div");A.on(window,"scroll",function(){var e=window.operationsStartPos,t=q().scrollTop;t<=e||a<=t?(_.removeClass(n,"operations-fix"),x.width(n,"auto")):e<=t&&t<=a&&(_.addClass(n,"operations-fix"),x.width(n,o)),7===I.env.ua.ie&&(n.style.zoom="1"),6===I.env.ua.ie&&(n.style.top=t-e+"px"),I.env.ua.ie<8&&(_.removeClass(i,"trigger-container"),_.addClass(i,"trigger-container"))})}}(),A.on(window,"scroll",function(){A.removeListener(window,"scroll",arguments.callee),function(){divBar=document.createElement("div"),_.addClass(divBar,"go-top");var e=document.createElement("a");e.href="#";var t=document.createElement("span");if(t.appendChild(document.createTextNode("\u8fd4\u56de\u9876\u90e8")),6===I.env.ua.ie){var n=".go-top{_position: absolute;_zoom: expression(function(el) {el.style.zoom = 1;window.onscroll = function() {el.className = el.className;};}(this));}",a=document.createElement("style");a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}e.appendChild(t),divBar.appendChild(e),document.body.appendChild(divBar),W();var o=!(divBar.style.display="block"),i=O.later(0,document,function(){});6===A.ie?A.on(window,"scroll",function(){!1===o&&(divBar.style.display="none",o=!0),i.cancel(),i=O.later(500,document,function(){!0===o&&0<q().scrollTop&&(W(!0),o=!1)})}):A.on(window,"scroll",function(){!0===o&&(divBar.style.display="block",o=!1),i.cancel(),i=O.later(500,document,function(){!1===o&&0===q().scrollTop&&(divBar.style.display="none",o=!0)})});var r=O.later(0,document,function(){});A.on(window,"resize",function(){r.cancel(),r=O.later(500,document,W)}),A.on(e,"click",function(e){A.preventDefault(e),q().scrollTop=0})}()})}if(_.get("J_goodsInSock")){var p=_.getElementsByClassName("text-amount","input",J_DataTable);A.on(p,"keypress",function(e){var t=A.getTarget(e);H(t);var n=t.value;1e8<parseInt(n)&&(t.value=1e8)})}if(_.get("edit-SKU-form")){V();var g=document.forms["edit-SKU-form"];$(location.href,"type");A.on("J_edit-SKU-more","click",function(e){A.preventDefault(e),F(parent.document);var t=_.getElementsByClassName("current","tr",parent.document)[0];J(t)});var v=_.getElementsByClassName("new-SKU-num","input",g);A.on(v,"keyup",function(e){var t=A.getTarget(e);H(t);var n=t.value;1e8<parseInt(n)&&(t.value=1e8)}),A.on(v,"keypress",function(e){var t=A.getTarget(e);H(t);var n=t.value;if(1e8<parseInt(n)&&(t.value=1e8),13==e.keyCode){if(!G.call(t))return void A.preventDefault(e);Q(e)}}),A.on(v,"blur",G),A.on(v,"change",function(){this.style.color="#f60"}),_.get("edit-num-SKU-iframe")&&A.on(g,"submit",Q);var f=_.getElementsByClassName("new-fix-price","input",g)[0];A.on(f,"keyup",function(e){var t=A.getTarget(e);D.call(t)}),A.on(f,"keypress",function(e){var t=A.getTarget(e);D.call(t),13==e.keyCode&&Z(e)}),A.on(f,"change",function(){this.style.color="#f60"});var h=_.getElementsByClassName("new-SKU-price","input",g);A.on(h,"keyup",function(e){var t=A.getTarget(e);D.call(t)}),A.on(h,"keypress",function(e){var t=A.getTarget(e);D.call(t),13==e.keyCode&&M.call(this,e,Z)});A.on(h,"change",function(){this.style.color="#f60"}),_.get("edit-price-SKU-iframe")&&A.on(g,"submit",function(e){if(13==e.keyCode)return!1;M.call(this,e,Z)});var y=KISSY.query(".J_RangeInput");KISSY.each(y,function(e){K(e,{points:["tr","br"],validEvent:""})})}var C=_.get("J_RecommendPrompt");if(simpleStorage.init(),C){var T=top.UID||"",N=_.get("J_PromptTotNumber").innerHTML,E=_.get("J_PromptCurNumber").innerHTML;function b(){C.parentNode&&C.parentNode.removeChild(C)}function B(){var e=_.get("closePrompt");A.on(e,"click",function(e){A.preventDefault(e),b(),simpleStorage.setItem("hideToolPrompt"+T,"true")}),_.setStyle(C,"display","block"),simpleStorage.setItem("recommendNumber"+T,N)}window.RECOMMEND_COUNT=E==N?void 0:N;var k=simpleStorage.getItem("recommendNumber"+T),S=simpleStorage.getItem("hideToolPrompt"+T);k==N?"false"==S||null===S?B():b():(B(),simpleStorage.setItem("hideToolPrompt"+T,!1))}var w=_.getElementsByClassName("copy-link","a","J_DataTable");window.clipboardData?A.on(w,"click",P):U(w)})}(),function(){var r=window.KISSY;if(r){var l=r.DOM;r.Event;r.ready(function(){var t=l.get("#punish-alert"),n=-1!==location.host.indexOf("daily.taobao.net")?"daily.taobao.net":"taobao.com",i={down:"{down}\u4e2a\u5df2\u7ecf\u5904\u7f5a\u7684\u5b9d\u8d1d",warn:"{warn}\u4e2a\u5373\u5c06\u5904\u7f5a\u7684\u5b9d\u8d1d",advise:"{advise}\u4e2a\u5efa\u8bae\u4f18\u5316\u7684\u5b9d\u8d1d"},e=l.attr(t,"data-url")||location.protocol+"//notice.daily.taobao.net/json/counter.htm";t&&r.ajax({url:(/^https?:\/\//i.test(e)?"":location.protocol)+e,dataType:"jsonp",tyep:"GET",success:function(a){var o=[];if(r.each(a,function(e,t){var n=1*e;!isNaN(n)&&0<n&&o.push(r.substitute(i[t],a))}),0<o.length){var e=l.create(r.substitute('<a target="_blank" href="{url}" hidefocus="true">{msg}</a>',{url:"//notice."+n+"/notice_dispatch.htm",msg:o.join("\uff0c")}));l.append(e,t)}},error:function(){}})})}}();var getSelected=function(){var e=[],t=document.getElementsByName("selectedIds");if(null==t||t.length<=0)return"";for(var n=0;n<t.length;n++)t[n].checked&&e.push(t[n].value);return e};!function(){var r=KISSY,t=r.all;KISSY.ready(function(){var i,e=t("#weiHaiBao");e.length&&(e.on("click",function(e){var a,t=getSelected(),n=t.length,o="//"+(-1<location.host.indexOf("daily.taobao.net")?"mf.daily.taobao.net":"mf.taobao.com")+"/itemService?bizcode=itemcenter&itemid="+encodeURIComponent(r.JSON.stringify(t));return 0===n?alert("\u8bf7\u5148\u9009\u62e9\u8981\u521b\u5efa\u5fae\u6d77\u62a5\u7684\u5b9d\u8d1d"):10<n?alert("\u76ee\u524d\u6700\u591a\u652f\u630110\u4e2a\u5b9d\u8d1d\u521b\u5efa\u5fae\u6d77\u62a5\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"):(a=o,r.use("overlay",function(e,t){var n=['<iframe class="page-content" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" src="'+a+'"></iframe>'].join("");(i=new t({prefixCls:"tbs-",elCls:"tbs-dialog-popup weihaibao",content:n,mask:!0,closable:!1,zIndex:11e4,align:{points:["cc","cc"]}})).show()})),!1}),t(window).on("message",function(e){"whb-close"===e.data&&i.hide()}))})}(),function(){var l=KISSY,s=l.all;KISSY.ready(function(){var i,t=[],e='<div class="fitting-room-loading-area"><img src="//img.alicdn.com/tps/i1/T1YkPoFl8dXXb6ROYh-48-48.gif"  alt="\u7b49\u5f85\u52a0\u8f7d\u4e2d..." /></div>',a=function(e,t,n){return['<div class="fitting-room-success">','<img src="//img.alicdn.com/tfs/TB1Ha_9QXXXXXbIXFXXXXXXXXXX-90-90.png" alt="\u6210\u529f"/>','<p style="font-size:18px;color:#333;">\u5df2\u6210\u529f\u4e3a '+(e||0)+" \u4ef6\u5b9d\u8d1d"+("add"===n?"\u5f00\u542f":"\u5173\u95ed")+"\u8bd5\u8863\u95f4</p>",t?'<p style="font-size:14px;color:#333;">(\u6240\u9009\u5b9d\u8d1d\u4e2d\u6709'+t+"\u4ef6\u4e0d\u652f\u6301\u8bd5\u8863\u95f4\u529f\u80fd)</p>":"",'<button style=" margin-top: 70px;" class="close-fitting-room">\u6211\u77e5\u9053\u4e86</button>',"</div>"].join("")},o=function(e){return['<div class="fitting-room-failed">','<img src="//img.alicdn.com/tfs/TB1p7.qQXXXXXbwXXXXXXXXXXXX-90-90.png" alt="\u5931\u8d25"/>','<p style="font-size:18px;color:#333;">'+(e||"\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u8fd4\u56de\u91cd\u8bd5")+"</p>",'<button style=" margin-top: 92px;" class="close-fitting-room">\u8fd4\u56de\u91cd\u8bd5</button>',"</div>"].join("")};var n=s("#fittingRoom");function r(t,e){t=t||"add";var n=s(".tbs-contentbox");l.ajax({url:"/auction/merchandise/FittingRoomOpt.htm",type:"POST",dataType:"json",data:{items:e.join(","),optType:t},success:function(e){e.success?(n.html(a(e.hasSuccessNum,e.notSupportItem,t)),setTimeout(function(){window.location.reload()},500)):n.html(o(e.msg))},error:function(e){n.html(o(data.msg))}})}n.length&&(n.on("click",function(e){var o;return 0===(t=getSelected()).length?alert("\u8bf7\u5148\u9009\u62e9\u9700\u8981\u5f00\u542f\u8bd5\u8863\u95f4\u4e1a\u52a1\u7684\u5b9d\u8d1d"):(o=t,l.use("overlay",function(e,t){var n=o.map(function(e){var t=document.querySelector('input[name="fittingRoom:'+e+'"]'),n=!1;return t&&(n="true"===t.value),n}).every(function(e){return!e}),a=['<div style="position: absolute; width:100%;">',"<h1>\u6b22\u8fce\u4f7f\u7528\u8bd5\u8863\u95f4\u529f\u80fd</h1>","<p>\u4f7f\u7528\u8bd5\u8863\u95f4\u4e1a\u52a1\u540e\uff0c\u53ef\u964d\u4f4e\u4e70\u5bb6\u9000\u8d27\u7387\u3002</p>",'<p>\u5177\u4f53\u4e1a\u52a1\u7ec6\u5219\u8bf7 <a href="#" target="_blank">\u67e5\u770b\u8be6\u60c5</a></p>','<div class="fitting-room-pic" style="height:175px;">','<img src="//img.alicdn.com/tfs/TB1Mif4QXXXXXb5XFXXXXXXXXXX-105-101.png" style="margin:40px 0;" alt="\u8bd5\u8863\u95f4"/>',"</div>",'<p class="fitting-room-error">'+(n?"\u6240\u9009\u5b9d\u8d1d\u4e0d\u652f\u6301\u8bd5\u8863\u95f4\u529f\u80fd":"")+"</p>",'<button id="add-fitting-room" class='+(n?"disabled":"")+">\u4e3a\u6240\u9009\u7684 "+o.length+" \u4ef6\u5546\u54c1\u5f00\u542f\u8bd5\u8863\u95f4</button>","<br>",'<button id="quit-fitting-room" class='+(n?"disabled":"")+">\u4e3a\u6240\u9009\u7684 "+o.length+" \u4ef6\u5546\u54c1\u5173\u95ed\u8bd5\u8863\u95f4</button>","</div>"].join("");(i=new t({prefixCls:"tbs-",elCls:"tbs-dialog-popup fitting-room",content:a,mask:!0,closable:!0,zIndex:11e4,align:{points:["cc","cc"]}})).show()})),!1}),s("body").delegate("click","#quit-fitting-room",function(){s(".tbs-contentbox ").html(e),r("quit",t)}),s("body").delegate("click","#add-fitting-room",function(){s(".tbs-contentbox ").html(e),r("add",t)}),s("body").delegate("click",".close-fitting-room",function(){i.hide()}))})}(),function(){var a=KISSY,o=a.all;a.ready(function(){o("body").delegate("click",".islight",function(e){e.stopPropagation(),e.preventDefault();var t=o(e.currentTarget).attr("data-id"),n=o(e.currentTarget).attr("data-href");if(!window.confirm("\u8f7b\u53d1\u5e03\u5546\u54c1\u5728\u7f51\u9875\u7f16\u8f91\u540e\uff0c\u5c06\u4e0d\u53ef\u5728\u624b\u673a\u7aef\u8fdb\u884c\u7f16\u8f91"))return!1;a.ajax({url:"/auction/merchandise/shiftItemOpt.htm",type:"POST",dataType:"json",data:{itemId:t},success:function(e){e.success?window.open(n):window.alert(e.msg)},error:function(e){window.alert("\u62b1\u6b49\uff0c\u670d\u52a1\u5668\u9047\u5230\u9519\u8bef\uff0c\u6b63\u5728\u62a2\u4fee\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}})})})}();